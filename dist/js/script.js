"use strict";const results=document.querySelector(".results"),form=document.querySelector(".search__form"),searchInput=document.querySelector(".search__input");let valueBtn="",isActiveSearch=!1;const RESOURCES={films:"films",people:"people",starships:"starships",vehicles:"vehicles",species:"species",planets:"planets"},resoursesBtns=document.querySelector(".nav__list"),resoursesBtnsItems=resoursesBtns.querySelectorAll(".nav__item"),filmsBtn=document.querySelector(".nav__item-films"),pagination=document.querySelector(".pagination__list");async function fetchData(t,e){const a=await fetch(t),n=await a.json();showPagination(n.count),displayResults(n,e)}function getTemplateUrl(t,e=1){return`https://swapi.dev/api/${t}/?page=${e}`}function getSearchUrl(t,e,a=""){return`https://swapi.dev/api/${t}/?search=${e}${a}`}function showPagination(t){let e="";const a=t>10?Math.ceil(t/10):0;if(a>1)for(let t=1;t<=a;t++)e+=paginationBtnTemplate(t);pagination.innerHTML=e}function displayResults(t,e){let a="";e===RESOURCES.films&&t.results.forEach(t=>{a+=`\n\t\t\t\t<div class="card">\n\t\t\t\t\t<h3 class="card__title card__title_close">${t.title}</h3>\n\t\t\t\t\t<div class="card__content">\n\t\t\t\t\t\t<div><span>Producer:</span> ${t.producer}</div>\n\t\t\t\t\t\t<div><span>Director:</span> ${t.director}</div>\n\t\t\t\t\t\t<div><span>Release date:</span> ${t.release_date}</div>\n\t\t\t\t\t\t<p>${t.opening_crawl}</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`}),e===RESOURCES.people&&t.results.forEach(t=>{a+=`\n\t\t\t\t<div class="card">\n\t\t\t\t\t<h3 class="card__title card__title_close">${t.name}</h3>\n\t\t\t\t\t<div class="card__content">\n\t\t\t\t\t\t<div><span>Birth year:</span> ${t.birth_year}</div>\n\t\t\t\t\t\t<div><span>Height:</span> ${t.height}</div>\n\t\t\t\t\t\t<div><span>Skin color:</span> ${t.skin_color}</div>\n\t\t\t\t\t\t<div><span>Eye color:</span> ${t.eye_color}</div>\n\t\t\t\t\t\t<div><span>Gender:</span> ${t.gender}</div>\n\t\t\t\t\t\t<div><span>Hair color:</span> ${t.hair_color}</div>\n\t\t\t\t\t\t<div><span>Mass:</span> ${t.mass}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`}),e===RESOURCES.starships&&t.results.forEach(t=>{a+=`\n\t\t\t\t<div class="card">\n\t\t\t\t\t<h3 class="card__title card__title_close">${t.name}</h3>\n\t\t\t\t\t<div class="card__content">\n\t\t\t\t\t\t<div><span>Capacity:</span> ${t.cargo_capacity}</div>\n\t\t\t\t\t\t<div><span>Length:</span> ${t.length}</div>\n\t\t\t\t\t\t<div><span>Manufacturer:</span> ${t.manufacturer}</div>\n\t\t\t\t\t\t<div><span>Consumables:</span> ${t.consumables}</div>\n\t\t\t\t\t\t<div><span>Cost:</span> ${t.cost_in_credits}</div>\n\t\t\t\t\t\t<div><span>Crew:</span> ${t.crew}</div>\n\t\t\t\t\t\t<div><span>Hyperdrive rating:</span> ${t.hyperdrive_rating}</div>\n\t\t\t\t\t\t<div><span>Max speed:</span> ${t.max_atmosphering_speed}</div>\n\t\t\t\t\t\t<div><span>Passengers:</span> ${t.passengers}</div>\n\t\t\t\t\t\t<div><span>Starship class:</span> ${t.starship_class}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`}),e===RESOURCES.vehicles&&t.results.forEach(t=>{a+=`\n\t\t\t\t<div class="card">\n\t\t\t\t\t<h3 class="card__title card__title_close">${t.name}</h3>\n\t\t\t\t\t<div class="card__content">\n\t\t\t\t\t\t<div><span>Capacity:</span> ${t.cargo_capacity}</div>\n\t\t\t\t\t\t<div><span>Length:</span> ${t.length}</div>\n\t\t\t\t\t\t<div><span>Manufacturer:</span> ${t.manufacturer}</div>\n\t\t\t\t\t\t<div><span>Consumables:</span> ${t.consumables}</div>\n\t\t\t\t\t\t<div><span>Cost:</span> ${t.cost_in_credits}</div>\n\t\t\t\t\t\t<div><span>Crew:</span> ${t.crew}</div>\n\t\t\t\t\t\t<div><span>Max speed:</span> ${t.max_atmosphering_speed}</div>\n\t\t\t\t\t\t<div><span>Model:</span> ${t.model}</div>\n\t\t\t\t\t\t<div><span>Passengers:</span> ${t.passengers}</div>\n\t\t\t\t\t\t<div><span>Vehicle class:</span> ${t.vehicle_class}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`}),e===RESOURCES.species&&t.results.forEach(t=>{a+=`\n\t\t\t\t<div class="card">\n\t\t\t\t\t<h3 class="card__title card__title_close">${t.name}</h3>\n\t\t\t\t\t<div class="card__content">\n\t\t\t\t\t\t<div><span>Hight:</span> ${t.average_height}</div>\n\t\t\t\t\t\t<div><span>Language:</span> ${t.language}</div>\n\t\t\t\t\t\t<div><span>Lifespan:</span> ${t.average_lifespan}</div>\n\t\t\t\t\t\t<div><span>Designation:</span> ${t.designation}</div>\n\t\t\t\t\t\t<div><span>Classification:</span> ${t.classification}</div>\n\t\t\t\t\t\t<div><span>Eye colors:</span> ${t.eye_colors}</div>\n\t\t\t\t\t\t<div><span>Hair colors:</span> ${t.hair_colors}</div>\n\t\t\t\t\t\t<div><span>Skin colors:</span> ${t.skin_colors}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`}),e===RESOURCES.planets&&t.results.forEach(t=>{a+=`\n\t\t\t\t<div class="card">\n\t\t\t\t\t<h3 class="card__title card__title_close">${t.name}</h3>\n\t\t\t\t\t<div class="card__content">\n\t\t\t\t\t\t<div><span>Climate:</span> ${t.climate}</div>\n\t\t\t\t\t\t<div><span>Gravity:</span> ${t.gravity}</div>\n\t\t\t\t\t\t<div><span>Rotation period:</span> ${t.rotation_period}</div>\n\t\t\t\t\t\t<div><span>Orbital period:</span> ${t.orbital_period}</div>\n\t\t\t\t\t\t<div><span>Diameter:</span> ${t.diameter}</div>\n\t\t\t\t\t\t<div><span>Population:</span> ${t.population}</div>\n\t\t\t\t\t\t<div><span>Surface water:</span> ${t.surface_water}</div>\n\t\t\t\t\t\t<div><span>Terrain:</span> ${t.terrain}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`}),results.innerHTML=a}function paginationBtnTemplate(t){return`<li class="pagination__item">${t}</li>`}function getCard(t){return t.target.closest(".card")}function cardViewToggle(t){t&&(t.querySelector(".card__content").classList.toggle("card__content_active"),t.querySelector(".card__title").classList.toggle("card__title_close"))}function formatText(t){return t.trim().toLowerCase()}function getActiveTabValue(){return formatText(document.querySelector(".nav__item_active").textContent)}function getTargetText(t){return t.target.textContent}function toggleActiveResousesBtn(t){resoursesBtnsItems.forEach(t=>{t.classList.contains("nav__item_active")&&t.classList.remove("nav__item_active")}),t.classList.add("nav__item_active")}resoursesBtns.addEventListener("click",t=>{toggleActiveResousesBtn(t.target);const e=getTargetText(t);isActiveSearch=!1,fetchData(getTemplateUrl(valueBtn=formatText(e)),valueBtn),form.reset()}),form.addEventListener("submit",t=>{t.preventDefault(),isActiveSearch=!0;const e=getActiveTabValue();fetchData(getSearchUrl(e,formatText(searchInput.value)),e)}),filmsBtn.click(),pagination.addEventListener("click",t=>{if(t.target.classList.contains("pagination__item")){const e=getTargetText(t);if(isActiveSearch){const t=getActiveTabValue();fetchData(getSearchUrl(t,formatText(searchInput.value),`&page=${e}`),t)}else{fetchData(getTemplateUrl(valueBtn,e),valueBtn)}}}),results.addEventListener("click",t=>{cardViewToggle(getCard(t))});